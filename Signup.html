<!DOCTYPE html>
<html lang="en">

<script>
	var userDetail=localStorage.getItem('nta')
	if (userDetail==undefined)
	{
	window.location="index.html"
	}
	
	</script>

<head>
<title>Signup</title>
<!-- Meta tag Keywords -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content=""/>
<script type="application/x-javascript"> addEventListener("load", function() {setTimeout(hideURLbar, 0); }, false);
function hideURLbar(){ window.scrollTo(0,1); } </script>

<link href="css/style.css" rel="stylesheet" type="text/css" media="all">
<link href="style.css" rel="stylesheet" type="text/css">
<!-- //css files -->
<!-- online-fonts -->
<link href="//fonts.googleapis.com/css?family=Cuprum:400,400i,700,700i&amp;subset=cyrillic,cyrillic-ext,latin-ext,vietnamese" rel="stylesheet">
<link href="dist/css/bootstrap.css" rel="stylesheet">
<!--//online-fonts -->
<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
<link href="css/animate.min.css" rel="stylesheet">
<script src="js/wow.min.js"></script>
</head>
<body>

		<div class="about-bottom book-form col-offset-4 wow fadeInDown" style="padding:px;">
		
		<h3 style="margin-top:-10px; text-color:red; text-shadow:1px 1px 1px #666666;">Staff Registration Form</h3>
		<form action="#" method="post">
        
			<div class="form-date-w3-agileits">
			<h5>Role
				<select id="role" name="role" class="form-control" style="border-color:#F00;" class="form-date-w3-agileits">
				<option name="chooserole" value="Choose Role" class="form-control" selected disabled style="border-color:#F00;" required>Select Role</option>
				<option name="admin" value="ADMIN" class="form-control" style="border-color:#F00;">ADMIN</option>
				<option name="editor" value="EDITOR" class="form-control" style="border-color:#F00;">EDITOR</option>
				<option name="user" value="USER" class="form-control" style="border-color:#F00;">USER</option>
				</select>
                </h5> 
          
				<h5> Department/Station
				<select id="department" class="form-control" style="border-color:#F00;" class="form-date-w3-agileits">
				<option name="chooserole"  class="form-control" selected disabled style="border-color:#F00;" required>Select Stations</option>
				<option name="network" value="NETWORK" class="form-control" style="border-color:#F00;">NETWORK</option>
				<option name="ews24" value="NEWS24" class="form-control" style="border-color:#F00;">NEWS24</option>
				<option name="international" value="INTERNATIONAL" class="form-control" style="border-color:#F00;" >INTERNATIONAL</option>
				<option name="parliament" value="PARLIAMENT" class="form-control" style="border-color:#F00;">PARLIAMENT</option>
				</select>
                </h5>
				
          		<h5> First Name 
				<input type="text" id="firstName" class="form-control" name="firstName" style="border-color:#F00;" placeholder="First Name" required/> 
                </h5>
                <h5> Second Name 
				<input type="text" id="secondName" class="form-control" name="secondName" style="border-color:#F00;" placeholder="Second Name" required> 
                </h5>
                <h5> Last Name: 
				<input type="text" id="lastName" class="form-control" name="lastName" style="border-color:#F00;" placeholder="Last Name" required> 
                </h5>
                <h5> Phone 
				<input type="text" id="phone" class="form-control" name="phone" style="border-color:#F00;" placeholder="Phone Number" required> </label>
				<h5> Email 
				<input type="email" id="email" class="form-control" name="email" style="border-color:#F00;" placeholder="Email/Username" required></label>
				<h5> Password 
				<input type="password" id="password" class="form-control" name="password" style="border-color:#F00;" placeholder="Your Password" 
                required> </h4>
				<h5> Confirm Password 
				<input type="password" id="password2" class="form-control" name="password2" style="border-color:#F00;" placeholder="Confirm Password" 
                required></h5>
			</div>
			<div class="make wow fadeInn" class="form-group"> 
				  <input type="submit" name="signup" class="" id="signup" style="text-align:center" value="Register">
			</div>
            
            
		</form>

    </div> <!-- /container -->


<!-- footer -->
<div class="footer-w3l">
	<p style="text-shadow:2px 2px #000;">&copy; NTA 2017</p>
</div>
<!-- //footer -->
<!-- js-scripts-->
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
		<script>$(document).ready(function(c) {
		$('.alert-close').on('click', function(c){
			$('.main-agile').fadeOut('slow', function(c){
				$('.main-agile').remove();
			});
		});	  
	});
	</script>
<!-- //js-scripts-->


<!-- //js-scripts saving to db-->

 <script>
   $("document").ready(function() { 
	var data = localStorage.getItem('nta')
   
  	var role = data.role;
	if(role!=="EDITOR" && role!=="ADMIN")
		
	{
		alert ("Access Denied!, this page is only accessible to Admin");
		window.location="home.php"
	}
	
	
	
	$("#signup").click(function(e){
		e.preventDefault()
	
	var password=$("#password").val();
	var password2=$("#password2").val();
	if(password!==password2)
	{
		alert("INVALID, password and confirm password is not the same");
		$("#signup").attr("disabled",true)
		$("a#signup").html("Sign Up")
		
	}
	else
	{
		$("a#signup").html("<img src='loader.gif'> Processing")
		$(".mysignup").text("Signing Up...")
		$("#signup").attr("disabled",true)
	
	/*alert("the First Name is "+JSON.stringify({
	firstName : $("#firstName").val(),
	secondName : $("#secondName").val(),
	lastName : $("#lastName").val(),
	emailAddress : $("#emailAddress").val(),
	phoneNumber : $("#phoneNumber").val(),
	userName : $("#userName").val(),
	password : $("#password").val(),
	password2 : $("#password2").val()
	}))*/
	

  
	
	var formdata={ 
	firstName : $("#firstName").val(),
	secondName : $("#secondName").val(),
	lastName : $("#lastName").val(),
	department: $("#department").val(),
	email :$("#email").val(),
	phone :$("#phone").val(),
	password :$("#password").val(),
	password2 : $("#password2").val(),
	role : $("#role").val()
	}
	
	
	
		//alert(JSON.stringify(formdata))
	$.ajax({
		url:"http://localhost/NTA/api.php/user",
		type:"POST",
		contentType: "application/json",
		dataType:"json",
		data: JSON.stringify(formdata),
		success:function(data){
			//alert(data)
			alert("One Member added Successfully") 
			$("#signup").attr("disabled",false)
			$("a#signup").html("Sign Up")
			window.location="admin.php";
	
			
		},
		error:function(){
			alert("something went wrong")
			$("a#signup").html("Sign Up")
		}
	})
	
	
	
	}
	})
	
      });
   </script> 
   	<script src="js/main.js"></script>	

</body>
</html>